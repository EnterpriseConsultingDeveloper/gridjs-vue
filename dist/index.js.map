{"version":3,"file":"index.js","sources":["../src/gridjs-vue.mjs","../src/index.mjs"],"sourcesContent":["import { Grid } from 'https://unpkg.com/gridjs/dist/gridjs.production.es.min.js'\nimport parseStylesheet from 'https://unpkg.com/parse-css-stylesheet/index.js'\nimport { uid } from 'https://unpkg.com/uid/single/index.mjs'\n\nconst waitForSelector = selector => {\n  const element = document.querySelector(selector)\n  if (element) return element\n\n  const mutObserver = new MutationObserver(mutations => {\n    for (const mutation of mutations) {\n      const nodes = Array.from(mutation.addedNodes)\n      for (const node of nodes) {\n        if (node.matches && node.matches(selector)) {\n          mutObserver.disconnect()\n          return node\n        }\n      }\n    }\n  })\n\n  mutObserver.observe(document.documentElement, { childList: true, subtree: true })\n}\n\nexport default {\n  name: 'Grid',\n  props: {\n    autoWidth: {\n      type: Boolean,\n      default: true\n    },\n    classNames: {\n      type: Object,\n      default: undefined\n    },\n    cols: {\n      type: [Array, Function],\n      default: undefined\n    },\n    from: {\n      type: [String, Function],\n      default: undefined\n    },\n    language: {\n      type: Object,\n      default: undefined\n    },\n    pagination: {\n      type: [Object, Boolean],\n      default: false\n    },\n    rows: {\n      type: [Array, Function],\n      default: undefined\n    },\n    search: {\n      type: Boolean,\n      default: false\n    },\n    server: {\n      type: [Object, Function],\n      default: undefined\n    },\n    sort: {\n      type: [Object, Boolean],\n      default: false\n    },\n    styles: {\n      type: Object,\n      default: undefined\n    },\n    theme: {\n      type: String,\n      default: 'mermaid'\n    },\n    width: {\n      type: String,\n      default: '100%'\n    }\n  },\n  data() {\n    return {\n      activeTheme: null,\n      dict: {\n        error: {\n          columnsUndefined: 'Column headers are undefined',\n          rowsUndefined: 'No data to display'\n        }\n      },\n      grid: null,\n      uuid: null,\n      wrapper: null\n    }\n  },\n  computed: {\n    tabularData() {\n      if (this.rows) return this.rows\n      if (this.from || this.server) return undefined\n      return [[this.dict.error.rowsUndefined]]\n    },\n    options() {\n      let options = {\n        autoWidth: this.autoWidth,\n        columns: this.cols ? this.cols : [this.dict.error.columnsUndefined],\n        data: this.tabularData,\n        pagination: this.pagination,\n        sort: this.sort,\n        width: this.width\n      }\n\n      if (this.classNames) options.className = this.classNames\n      if (this.from)\n        options.from =\n          typeof this.from === 'string'\n            ? document.querySelector(this.from)\n            : document.createRange().createContextualFragment(this.from())\n      if (this.language) options.language = this.language\n      if (this.search) options.search = this.search\n      if (this.server) options.server = this.server\n      if (this.styles) options.style = this.styles\n\n      return options\n    },\n    divId() {\n      return `gridjs__${this.uuid}`\n    }\n  },\n  watch: {\n    autoWidth() {\n      this.update()\n    },\n    classNames() {\n      this.update()\n    },\n    cols() {\n      this.update()\n    },\n    from() {\n      this.update()\n    },\n    language() {\n      this.update()\n    },\n    pagination() {\n      this.update()\n    },\n    rows() {\n      this.update()\n    },\n    search() {\n      this.update()\n    },\n    server() {\n      this.update()\n    },\n    sort() {\n      this.update()\n    },\n    styles() {\n      this.update()\n    },\n    width() {\n      this.update()\n    }\n  },\n  async created() {\n    try {\n      // give table a unique id\n      this.uuid = uid(16)\n\n      await waitForSelector(this.divId)\n      this.wrapper = document.getElementById(this.divId)\n\n      // assign styles\n      this.activeTheme = !this.theme && this.$gridjs.options.theme ? this.$gridjs.options.theme : this.theme\n      if (this.activeTheme !== 'none') this.assignTheme()\n      if (Object.keys(this.$gridjs.options).length) this.setOptions()\n\n      // instantiate grid.js\n      if (this.wrapper && (this.options.data || this.options.from || this.options.server)) {\n        this.grid = new Grid(this.options).render(this.wrapper)\n      }\n    } catch (error) {\n      console.error(error)\n    }\n  },\n  destroyed() {\n    // unload from memory\n    this.grid = undefined\n    this.wrapper = undefined\n  },\n  methods: {\n    async assignTheme() {\n      try {\n        const head = document.getElementsByTagName('head')[0]\n\n        let styles = document.createElement('style')\n        styles.title = `${this.divId}__theme`\n        styles.type = 'text/css'\n        head.appendChild(styles)\n\n        for (let index in document.styleSheets) {\n          if (document.styleSheets[index].title === styles.title) {\n            styles = document.styleSheets[index]\n          }\n        }\n\n        let theme = await fetch(`https://unpkg.com/gridjs/dist/theme/${this.activeTheme}.css`)\n        theme = await theme.text()\n        theme = parseStylesheet(theme)\n\n        if (styles instanceof CSSStyleSheet) {\n          for (const index in theme.cssRules) {\n            let css = theme.cssRules[index].cssText\n            if (css && !/^@/g.test(css)) {\n              styles.insertRule(`#${this.divId} ${css}`)\n            }\n          }\n        }\n      } catch (error) {\n        console.error(error)\n      }\n    },\n    setOptions() {\n      try {\n        const plugins = this.$gridjs.options.plugins\n        if (plugins) {\n          plugins.forEach(plugin => {\n            this.grid.plugin.add(plugin)\n          })\n        }\n      } catch (error) {\n        console.error(error)\n      }\n    },\n    update() {\n      try {\n        if (this.grid) this.grid.updateConfig(this.options).forceRender()\n      } catch (error) {\n        console.error(error)\n      }\n    }\n  },\n  template: `\n    <article :id=\"divId\" :data-uuid=\"uuid\" class=\"gridjs__wrapper\"></article>\n  `\n}\n","import { createRef, h, html, PluginPosition } from 'https://unpkg.com/gridjs/dist/gridjs.production.es.min.js'\nimport { uid } from 'https://unpkg.com/uid/single/index.mjs'\nimport Grid from './gridjs-vue.mjs'\n\nexport function install(Vue, options = {}) {\n  if (install.installed) return\n  install.installed = true\n\n  const render = (el, usrComponent, props, opts) => {\n    if (el && el.current) el = el.current\n\n    if (typeof el === 'string' && usrComponent) {\n      new Vue({\n        render(createElement) {\n          return createElement(usrComponent, { props, ...opts }, this.$slots.default)\n        },\n        components: {\n          usrComponent\n        }\n      }).$mount(el)\n    } else {\n      console.error('$gridjs.render() requires a target element and a component')\n    }\n  }\n\n  if (!Vue.prototype.$gridjs) {\n    Vue.prototype.$gridjs = {\n      createRef,\n      h,\n      html,\n      options,\n      PluginPosition,\n      render,\n      uuid: uid(16)\n    }\n  }\n\n  Vue.component('Grid', Grid)\n}\n\nconst plugin = {\n  install\n}\n\nlet GlobalVue = null\n\nif (typeof window !== 'undefined') {\n  GlobalVue = window.Vue\n} else if (typeof global !== 'undefined') {\n  GlobalVue = global.Vue\n}\n\nif (GlobalVue) {\n  GlobalVue.use(plugin)\n}\n\nexport { Grid, plugin as GridGlobal }\nexport default Grid\n"],"names":["_await","value","then","direct","Promise","resolve","body","recover","result","e","f","args","i","arguments","length","apply","this","reject","name","props","autoWidth","type","Boolean","default","classNames","Object","undefined","cols","Array","Function","from","String","language","pagination","rows","search","server","sort","styles","theme","width","data","activeTheme","dict","error","columnsUndefined","rowsUndefined","grid","uuid","wrapper","computed","tabularData","options","columns","className","document","querySelector","createRange","createContextualFragment","style","divId","watch","update","created","uid","selector","element","mutObserver","MutationObserver","mutations","mutation","nodes","addedNodes","node","matches","disconnect","observe","documentElement","childList","subtree","waitForSelector","_this","getElementById","$gridjs","assignTheme","keys","setOptions","Grid","render","console","destroyed","methods","head","getElementsByTagName","createElement","title","_this2","appendChild","index","styleSheets","fetch","text","parseStylesheet","CSSStyleSheet","cssRules","css","cssText","test","insertRule","plugins","forEach","plugin","add","updateConfig","forceRender","template","install","Vue","installed","el","usrComponent","opts","current","$slots","components","$mount","prototype","createRef","h","html","PluginPosition","component","GlobalVue","window","global","use"],"mappings":"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"}