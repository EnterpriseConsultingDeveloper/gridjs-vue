{"version":3,"file":"index.esm.js","sources":["../src/gridjs-vue.vue","../src/index.js"],"sourcesContent":["<template>\n  <article :id=\"`gridjs__${uuid}`\" :data-uuid=\"uuid\" :class=\"`gridjs__wrapper`\"></article>\n</template>\n\n<script>\nimport { Grid } from 'gridjs'\nimport { nanoid } from 'nanoid'\nimport elementReady from 'element-ready'\n\nexport default {\n  name: 'Grid',\n  props: {\n    autoWidth: {\n      type: Boolean,\n      default: true\n    },\n    cols: {\n      type: Array,\n      default: undefined\n    },\n    from: {\n      type: String,\n      default: undefined\n    },\n    language: {\n      type: Object,\n      default: undefined\n    },\n    pagination: {\n      type: [Object, Boolean],\n      default: false\n    },\n    rows: {\n      type: Array,\n      default: undefined\n    },\n    search: {\n      type: [Object, Boolean],\n      default: false\n    },\n    server: {\n      type: Object,\n      default: undefined\n    },\n    sort: {\n      type: [Object, Boolean],\n      default: false\n    },\n    theme: {\n      type: String,\n      default: 'mermaid'\n    },\n    width: {\n      type: String,\n      default: '100%'\n    }\n  },\n  data() {\n    return {\n      dict: {\n        error: {\n          columnsUndefined: 'Column headers are undefined',\n          rowsUndefined: 'No data to display'\n        }\n      },\n      grid: null,\n      styles: null,\n      uuid: null,\n      wrapper: null\n    }\n  },\n  computed: {\n    options() {\n      let options = {\n        autoWidth: this.autoWidth,\n        columns: this.cols ? this.cols : [this.dict.error.columnsUndefined],\n        data: this.rows ? this.rows : this.from || this.server ? undefined : [[this.dict.error.rowsUndefined]],\n        pagination: this.pagination,\n        sort: this.sort,\n        width: this.width\n      }\n\n      if (this.from) options.from = this.from\n      if (this.language) options.language = this.language\n      if (this.search) options.search = this.search\n      if (this.server) options.server = this.server\n\n      return options\n    }\n  },\n  watch: {\n    autoWidth() {\n      this.update()\n    },\n    cols() {\n      this.update()\n    },\n    from() {\n      this.update()\n    },\n    language() {\n      this.update()\n    },\n    pagination() {\n      this.update()\n    },\n    rows() {\n      this.update()\n    },\n    search() {\n      this.update()\n    },\n    server() {\n      this.update()\n    },\n    sort() {\n      this.update()\n    },\n    width() {\n      this.update()\n    }\n  },\n  async mounted() {\n    // give table a unique id\n    this.uuid = nanoid()\n\n    // select the unique wrapper element\n    this.wrapper = await elementReady(`[data-uuid=\"${this.uuid}\"]`)\n\n    // assign styles\n    this.assignStyles()\n\n    // instantiate grid.js\n    if (this.wrapper && (this.options.data || this.options.from || this.options.server)) {\n      this.grid = new Grid(this.options).render(this.wrapper)\n    }\n  },\n  destroyed() {\n    // unload from memory\n    this.grid = undefined\n    this.wrapper = undefined\n  },\n  methods: {\n    assignStyles() {\n      this.styles = require(`gridjs/dist/theme/${this.theme}.css`)\n\n      const styleSheets = document.styleSheets\n      const id = `#gridjs__${this.uuid}`\n\n      for (const sheetIndex in styleSheets) {\n        const ss = styleSheets[sheetIndex]\n        if (\n          ss.cssRules &&\n          ss.cssRules.length &&\n          ss.cssRules[0] &&\n          ss.cssRules[0].selectorText &&\n          /^.gridjs/.test(ss.cssRules[0].selectorText)\n        ) {\n          for (const index in ss.cssRules) {\n            let css = ss.cssRules[index].cssText\n            if (css && !/@/g.test(css)) {\n              const rule = `${id} ${css}`\n              ss.deleteRule(index)\n              ss.insertRule(rule, index)\n            }\n          }\n\n          const wrapperStyle = `\n            ${id}.gridjs__wrapper {\n              align-items: center;\n              display: flex;\n              height: fit-content;\n              justify-content: center;\n              width: 100%;\n            }\n          `\n          ss.insertRule(wrapperStyle)\n          styleSheets[sheetIndex].disabled = false\n          break\n        }\n      }\n    },\n    update() {\n      this.grid.updateConfig(this.options).forceRender()\n    }\n  }\n}\n</script>\n","import component from './gridjs-vue.vue'\n\nexport function install(Vue) {\n  if (install.installed) return\n  install.installed = true\n  Vue.component('Grid', component)\n}\n\nconst plugin = {\n  install\n}\n\nlet GlobalVue = null\nif (typeof window !== 'undefined') {\n  GlobalVue = window.Vue\n} else if (typeof global !== 'undefined') {\n  GlobalVue = global.Vue\n}\nif (GlobalVue) {\n  GlobalVue.use(plugin)\n}\n\nexport default component\n"],"names":["install","Vue","installed","component","plugin","GlobalVue","window","global","use"],"mappings":"kWASA,6wFCPO,SAASA,EAAQC,GAClBD,EAAQE,YACZF,EAAQE,WAAY,EACpBD,EAAIE,UAAU,OAAQA,IAGxB,IAAMC,EAAS,CACbJ,QAAAA,GAGEK,EAAY,KACM,oBAAXC,OACTD,EAAYC,OAAOL,IACQ,oBAAXM,SAChBF,EAAYE,OAAON,KAEjBI,GACFA,EAAUG,IAAIJ"}